{"version":3,"sources":["webpack:///./components/Firework/index.js"],"names":["x","y","canvas","document","createElement","width","height","style","cssText","body","appendChild","createCanvas","stage","createjs","Stage","ctx","getContext","fireBoss","autoClear","fillStyle","fillRect","Touch","enable","update","listener","Ticker","on","length","fireworks","sky","explode","splice","opacity","off","removeChild","i","push","Fireworks","getRandomInt","__webpack_require__","min","max","Math","floor","random","sx","sy","particles","circle","j","rad","ref","speed","this","Container","r","h","s","l","size","Shape","graphics","f","dc","snapToPixel","compositeOperation","PI","set","vx","cos","vy","sin","addChild","prototype","p","children","getChildAt","c","alpha","_setInterval"],"mappings":"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","file":"chunks/14c9b783be6de7144468.js","sourcesContent":["import 'imports-loader?this=>window!createjs/builds/1.0.0/createjs.min'\n\n// createjs.CSSPlugin.install();\nlet Fireworks\nlet GRAVITY\nlet K\nlet SPEED\n\nGRAVITY = 1\n\nK = 0.9\n\nSPEED = 200\n\nfunction ToRadian (degree) {\n  return degree * Math.PI / 180.0\n}\n\nFireworks = (function () {\n  function Fireworks (stage, sx, sy, particles) {\n    var circle, i, j, rad, ref, speed\n    this.stage = stage\n    this.sx = sx != null ? sx : 100\n    this.sy = sy != null ? sy : 100\n    this.particles = particles != null ? particles : 70\n    this.sky = new createjs.Container()\n    this.r = 0\n    this.h = Math.random() * 360 | 0\n    this.s = 100\n    this.l = 50\n    this.size = 3\n    for (i = j = 0, ref = this.particles; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n      speed = Math.random() * 12 + 2\n      circle = new createjs.Shape()\n      circle.graphics.f('hsla(' + this.h + ', ' + this.s + '%, ' + this.l + '%, 1)').dc(0, 0, this.size)\n      circle.snapToPixel = true\n      circle.compositeOperation = 'lighter'\n      rad = ToRadian(Math.random() * 360 | 0)\n      circle.set({\n        x: this.sx,\n        y: this.sy,\n        vx: Math.cos(rad) * speed,\n        vy: Math.sin(rad) * speed,\n        rad: rad\n      })\n      this.sky.addChild(circle)\n    }\n    stage.addChild(this.sky)\n  }\n\n  Fireworks.prototype.explode = function () {\n    var circle, j, p, ref\n    if (this.sky) {\n      ++this.h\n      for (p = j = 0, ref = this.sky.children.length; 0 <= ref ? j < ref : j > ref; p = 0 <= ref ? ++j : --j) {\n        circle = this.sky.getChildAt(p)\n        circle.vx = circle.vx * K\n        circle.vy = circle.vy * K\n        circle.x += circle.vx\n        circle.y += circle.vy + GRAVITY\n        this.l = Math.random() * 100\n        this.size = this.size - 0.001\n        if (this.size > 0) {\n          circle.graphics.c().f('hsla(' + this.h + ', 100%, ' + this.l + '%, 1)').dc(0, 0, this.size)\n        }\n      }\n      if (this.sky.alpha > 0.4) {\n        this.sky.alpha -= K / 50\n      }\n      else {\n        this.stage.removeChild(this.sky)\n        this.sky = null\n      }\n    } else {\n\n    }\n  }\n\n  return Fireworks\n\n})()\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\ncreatejs.Ticker._setInterval(1000/25)\n\n\nexport default function createFirework (x, y) {\n  const canvas = createCanvas(x, y)\n  const stage = new createjs.Stage(canvas)\n  const ctx = canvas.getContext('2d')\n  const fireBoss = []\n\n  stage.autoClear = false\n\n  ctx.fillStyle = 'rgba(0, 0, 0, 0)'\n\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\n\n\n  createjs.Touch.enable(stage)\n\n  stage.update()\n\n  const listener = createjs.Ticker.on('tick', repeat)\n\n  const offset = 30\n  for (let i = 0; i < 3; i++) {\n    fireBoss.push(new Fireworks(\n      stage,\n      canvas.width/2 + getRandomInt(-1 * offset, offset),\n      canvas.width/2 + getRandomInt(-1 * offset, offset)\n    ))\n  }\n\n  function repeat () {\n    if (fireBoss.length) {\n      for (let fireworks = 0; fireworks < fireBoss.length; fireworks++) {\n        if (fireBoss[fireworks].sky) {\n          fireBoss[fireworks].explode()\n        }\n        else {\n          fireBoss.splice(fireworks, 1)\n        }\n      }\n    }\n    else {\n      if (canvas.style.opacity > 0.1) {\n        canvas.style.opacity -= 0.05\n      } else {\n        createjs.Ticker.off('tick', listener)\n        document.body.removeChild(canvas)\n      }\n    }\n\n    stage.update()\n  }\n}\n\nfunction createCanvas (x, y) {\n  const canvas = document.createElement('canvas')\n\n  const width = 400\n  const height = 400\n  canvas.width = width\n  canvas.height = height\n  canvas.style.cssText = `pointer-events: none; position: absolute; opacity: 1; left: ${x - width/2}px; top: ${y - height/2}px;`\n  document.body.appendChild(canvas)\n\n  return canvas\n}\n\n\n\n\n"],"sourceRoot":""}